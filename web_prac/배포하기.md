# 프로젝트 서버에 올리기

## 서버의 역할

클라이언트의 요청을 받아서 원하는 것을 준다.<br/>
언제나 요청에 응답하려면,

1. 컴퓨터가 **항상** 켜져 있고 프로그램이 실행되어 있어야 한다.
2. 모두가 접근할 수 있는 공개 주소인 공개 IP 주소(Public IP Address)로 나의 웹 서비스에 **접근할 수 있도록** 해야한다.
   <br/>

외부 접속이 가능하게 설정한 다음, 내 컴퓨터를 서버로 사용할 수도 있지만 AWS라는 클라우드 서비스에서 편하게 서버를 관리하기 위해서 항상 켜 놓을 수 있는 컴퓨터인 EC2 사용권을 구입해 서버를 사용할 예정이다.

### IP 주소와 포트

우리가 접속하는 컴퓨터는 숫자로 되어있는 주소(IP 주소)가 붙어 있다. 우리가 아는 URL은 여러 가지 이유(알아보기 쉽다거나)로 IP주소를 알파벳으로 바꾼 것이다. 이렇게 변환해주는 시스템을 DNS라고 한다.

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fec83d1a9-9eb9-4c74-aad2-a95b797b1604%2Fweek06_ip.png?table=block&id=17f0867c-f7db-48ef-9c60-8caf57ab3ea8&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

- IP 주소<br/>
  : 컴퓨터가 통신할 수 있도록 컴퓨터마다 가지는 고유한 주소이다. 정확히 네트워크가 가능한 모든 기기가 통신할 수 있도록 가지는 특수한 번호이다. 서버는 하나의 주소를 가지고 있다.
- 포트(port)<br/>
  : 하나의 IP에 여러 포트가 있다. 하나의 포트에 하나의 프로그램을 실행시킬 수 있다.

# AWS 서버 구매하기

## EC2 서버 구매하기

AWS에서는 컴퓨터 한대를 인스턴스라고 부른다.<br/>

- EC2 콘솔페이지<br/>
  https://ap-northeast-2.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-2
  <br/>

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe0bfe685-84c5-4931-ba99-196597f756cc%2FUntitled.png?table=block&id=b58c5336-ff59-4aa8-bb58-70dad59a161b&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3764fb78-a3e6-429c-aaf5-621f639513e8%2FUntitled.png?table=block&id=2e24d614-a336-4d28-87d1-c627d2739107&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff3fb0c6d-ce53-4979-bf07-97bc71a06852%2FUntitled.png?table=block&id=46bdaf90-9f13-4dbd-93a0-b3be14a2db27&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1154a440-44e9-40a6-ad20-fcd4ae58bfc1%2FUntitled.png?table=block&id=e76f67a9-1b55-4834-b263-0e61f4dfe75b&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc8e983f6-07e6-4fa7-8b4a-d48b70a97302%2FUntitled.png?table=block&id=f9b9ef0c-ec09-4bb7-9589-1bcd309a7fac&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=960&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

1년 간 무료 이용이 가능하며, 1년 후엔 자동 결제된다. 더이상 결제를 원하지 않으면 아래의 방법 종료/중지한다.

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4cd9daaf-4901-4492-881f-aa3dc6560646%2F_2020-04-29__11.15.14.png?table=block&id=4f1821aa-68c9-4576-8063-6b7dcb4e4ec5&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

## 준비 상식

### 1. SSH(Secure Shell Protocol)

- 다른 컴퓨터에 접속할 때 쓰는 프로그램. 다른 것들 보다 보안이 상대적으로 뛰어나다.
- 접속할 컴퓨터의 22번 포트가 열려있어야 접속 가능하다. AWS EC2의 경우, 이미 22번 포트가 열려있다.

### 2. AWS EC2에 접속하기

1. ssh|git bash를 실행한다.
2. ssh -i _받은키페어끌어다놓기_ ubuntu@_AWS에적힌내아이피_
3. Key fingerprint 관련 메세지가 나올 경우 Yes.
4. git bash를 종료할 때는 exit 명령어를 입력하여 ssh 접속을 먼저 끊어줄 것.

### 3. 간단한 리눅스 명령어 연습하기

리눅스는 윈도우와 달리 '쉘 명령어'를 통해 OS를 조작한다.

- 가장 많이 쓰는 명령어 몇 가지 (tip! ↑키를 누르면 직전에 썼던 명령어가 나온다.)

```shell
    ls: 내 위치의 모든 파일을 보여준다.

    pwd: 내 위치(폴더의 경로)를 알려준다.

    mkdir: 내 위치 아래에 폴더를 하나 만든다.

    cd [갈 곳]: 나를 [갈 곳] 폴더로 이동시킨다.

    cd .. : 나를 상위 폴더로 이동시킨다.

    cp -r [복사할 것] [붙여넣기 할 것]: 복사 붙여넣기

    rm -rf [지울 것]: 지우기

    sudo [실행 할 명령어]: 명령어를 관리자 권한으로 실행한다.
    sudo su: 관리가 권한으로 들어간다. (나올때는 exit으로 나옴)
```

## 서버 세팅하기

### filezilla를 이용해서, 파일을 업로드한다.

- 파일질라 실행 후 다음과 같이 설정한다.
- 정보들을 입력하고 ok 누르면 서버의 파일들을 볼 수 있다.<br/>
  (Host : 내 EC2서버의 ip//User:ubuntu로 입력)
- 마우스로 드래그해서 파일을 업로드/다운로드하면 된다.

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5564e4cb-ffc5-49ba-9dc4-56efce3a49ad%2FUntitled.png?table=block&id=826d3faf-420e-490c-888f-7957a168484d&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=1250&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc91661f0-1274-4f35-b9c2-3a09879a0b09%2FUntitled.png?table=block&id=f54df2cd-1705-42cc-bb25-4407f16c5af8&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=1430&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

![image description](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47a40685-1be7-421f-939f-0fdad19c7d81%2FUntitled.png?table=block&id=ad33fdb5-dc72-4329-bd8b-b8c28ed2674e&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=1650&userId=ab429fbd-6203-465d-9406-c9efc69890d5&cache=v2)

- 파이썬 파일 실행하기<br/>

EC2 콘솔창에
`python3 test.py`
를 입력하면 실행된다. 여기서 python3인 이유는 python3버전을 사용하고 있기 때문이다.

## 서버 환경 통일하기

파일 질라에 EC2 세팅 파일을 업로드 한 후

```shell
sudo chmod 755 initial_ec2.sh
./initial_ec2.sh
```

를 차례대로 실행한다. 3분 정도 기다리면 모든 세팅이 완료된다.

이제 `python test.py` 라고 입력해도 파일이 실행된다.

### 서버 환경 세팅(EC2 세팅 파일 내용)
